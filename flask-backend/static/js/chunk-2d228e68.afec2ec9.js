(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d228e68"],{dac8:function(o,e,a){"use strict";a.r(e);var t=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("v-container",{staticClass:"mt-6"},[a("v-row",[a("v-col",[a("v-card",{staticClass:"mx-auto"},[a("v-card-text",{staticClass:"py-0"},[a("v-row",[a("v-col",{staticStyle:{"padding-top":"20px"}},[a("span",{staticClass:"page-title primary--text"},[o._v("INSUMOS")])]),a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return o.abrirDialogoInsumo({},!0)}}},[o._v("INSERIR ")])],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-data-table",{attrs:{"sort-by":"ordem","disable-pagination":"",locale:"pt","hide-default-footer":"",headers:o.headers,items:o.store.insumos,"item-key":"codigo_insumo"},scopedSlots:o._u([{key:"item.actions",fn:function(e){var t=e.item;return[a("v-icon",{attrs:{color:"primary"},on:{click:function(e){return o.abrirDialogoInsumo(t,!1)}}},[o._v(" mdi-pencil ")]),a("v-icon",{attrs:{color:"primary"},on:{click:function(e){return o.confimarDelecaoInsumo(t)}}},[o._v(" mdi-delete ")])]}}],null,!0)})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:o.insumoDialogo,callback:function(e){o.insumoDialogo=e},expression:"insumoDialogo"}},[a("v-card",[a("v-card-text",[a("v-container",[a("v-row",{staticClass:"mt-4"},[a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{label:"Código",placeholder:" ",outlined:"",dense:"","hide-details":"auto"},model:{value:o.insumo.codigo_insumo,callback:function(e){o.$set(o.insumo,"codigo_insumo",e)},expression:"insumo.codigo_insumo"}})],1)],1),a("v-row",{staticClass:"mt-4"},[a("v-col",[a("v-text-field",{attrs:{label:"Descrição",placeholder:" ",outlined:"",dense:"","hide-details":"auto"},model:{value:o.insumo.descricao,callback:function(e){o.$set(o.insumo,"descricao",e)},expression:"insumo.descricao"}})],1)],1),a("v-row",{staticClass:"mt-4"},[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Unidades por Pacote",placeholder:" ",outlined:"",dense:"","hide-details":"auto"},model:{value:o.insumo.unidades_pacote,callback:function(e){o.$set(o.insumo,"unidades_pacote",e)},expression:"insumo.unidades_pacote"}})],1)],1),a("v-row",{staticClass:"mt-4"},[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Ordem de Apresentação",placeholder:" ",outlined:"",dense:"","hide-details":"auto"},model:{value:o.insumo.ordem,callback:function(e){o.$set(o.insumo,"ordem",e)},expression:"insumo.ordem"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary dark",text:""},on:{click:o.cancelarDialogoInsumo}},[o._v("Cancelar")]),a("v-btn",{staticClass:"mr-5",attrs:{disabled:o.desabilitarBotaoSalvar,color:"blue darken-1",text:""},on:{click:o.salvar}},[o._v("Salvar")])],1)],1)],1)],1),a("v-snackbar",{attrs:{top:""},scopedSlots:o._u([{key:"action",fn:function(e){var t=e.attrs;return[a("v-btn",o._b({attrs:{color:"primary",text:""},on:{click:function(e){o.exibirSnackbar=!1}}},"v-btn",t,!1),[o._v(" Fechar ")])]}}]),model:{value:o.exibirSnackbar,callback:function(e){o.exibirSnackbar=e},expression:"exibirSnackbar"}},[o._v(" "+o._s(o.snackbarMensagem)+" ")]),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:o.confirmaExclusaoDialogo,callback:function(e){o.confirmaExclusaoDialogo=e},expression:"confirmaExclusaoDialogo"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[o._v("Excluir Insumo")]),a("v-card-text",[o._v("Você tem certeza que deseja excluir o insumo "+o._s(this.insumo.descricao)+" (Código: "+o._s(this.insumo.codigo_insumo)+")? Esta ação não pode ser desfeita.")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"yellow darken-1",text:""},on:{click:function(e){o.confirmaExclusaoDialogo=!1}}},[o._v("Cancelar")]),a("v-btn",{staticClass:"mr-5",attrs:{color:"red darken-1",text:""},on:{click:o.excluirInsumo}},[o._v("Excluir")])],1)],1)],1)],1)},n=[],i=(a("99af"),a("4de4"),a("7db0"),a("a9e3"),a("d3b7"),a("5530")),s=(a("96cf"),a("1da1")),r=a("07a4"),c={name:"Insumo",data:function(){return{store:r["a"],insumo:{},insumoDialogo:!1,ehNovoInsumo:!1,exibirSnackbar:!1,snackbarMensagem:"",confirmaExclusaoDialogo:!1,headers:[{text:"Ordem",align:"center",value:"ordem",sortable:!0},{text:"Codigo",align:" d-none",value:"codigo_insumo",sortable:!0},{text:"Descrição",align:"start",sortable:!0,value:"descricao"},{text:"Unidades por Pacote",align:"center",sortable:!1,value:"unidades_pacote"},{text:"Ações",align:"center",value:"actions",sortable:!1}]}},created:function(){return Object(s["a"])(regeneratorRuntime.mark((function o(){var e;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(0!==r["a"].insumos.length){o.next=7;break}return o.next=3,fetch("".concat("","/api/insumos"));case 3:return e=o.sent,o.next=6,e.json();case 6:r["a"].insumos=o.sent;case 7:case"end":return o.stop()}}),o)})))()},mounted:function(){window.scrollTo(0,0)},methods:{abrirDialogoInsumo:function(o,e){this.ehNovoInsumo=e,!1===e&&(this.insumo=Object(i["a"])({},o)),this.insumoDialogo=!0},cancelarDialogoInsumo:function(){this.insumo={},this.insumoDialogo=!1},salvar:function(){this.ehNovoInsumo?this.salvarNovoInsumo():this.salvarInsumoExistente()},insumoJaExiste:function(){var o=this,e=r["a"].insumos.find((function(e){return e.codigo_insumo===o.insumo.codigo_insumo}));return void 0!==e&&(this.snackbarMensagem="O insumo ".concat(e.descricao," já está cadastrado com o código ").concat(this.insumo.codigo_insumo,". Não é possível adicionar dois insumos com o mesmo código."),this.exibirSnackbar=!0,!0)},salvarNovoInsumo:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o.insumoJaExiste()){e.next=2;break}return e.abrupt("return");case 2:return r["a"].insumos.push(o.insumo),r["a"].insumos.sort((function(o,e){return Number(o.ordem)>Number(e.ordem)?1:Number(e.ordem)>Number(o.ordem)?-1:0})),e.next=6,fetch("".concat("","/api/insumos"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o.insumo)});case 6:o.insumo={},o.insumoDialogo=!1;case 8:case"end":return e.stop()}}),e)})))()},salvarInsumoExistente:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=r["a"].insumos.find((function(e){return e.codigo_insumo===o.insumo.codigo_insumo})),a.descricao=o.insumo.descricao,a.unidades_pacote=o.insumo.unidades_pacote,a.ordem=o.insumo.ordem,e.next=6,fetch("".concat("","/api/insumos/").concat(o.insumo.codigo_insumo),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o.insumo)});case 6:o.insumo={},o.insumoDialogo=!1;case 8:case"end":return e.stop()}}),e)})))()},confimarDelecaoInsumo:function(o){this.insumo=o,this.confirmaExclusaoDialogo=!0},excluirInsumo:function(){var o=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("","/api/insumos/").concat(o.insumo.codigo_insumo),{method:"DELETE"});case 3:r["a"].insumos=r["a"].insumos.filter((function(e){return e.codigo_insumo!==o.insumo.codigo_insumo})),o.insumo={},o.confirmaExclusaoDialogo=!1,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("erro ao excluir um insumo");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},computed:{desabilitarBotaoSalvar:function(){return!(this.insumo&&this.insumo.codigo_insumo&&this.insumo.descricao&&this.insumo.unidades_pacote&&this.insumo.ordem)}}},u=c,l=a("2877"),m=a("6544"),d=a.n(m),v=a("8336"),p=a("b0af"),f=a("99d9"),b=a("62ad"),x=a("a523"),g=a("8fea"),h=a("169a"),k=a("132d"),_=a("0fd9"),w=a("2db4"),D=a("2fa4"),C=a("8654"),I=Object(l["a"])(u,t,n,!1,null,null,null);e["default"]=I.exports;d()(I,{VBtn:v["a"],VCard:p["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VCol:b["a"],VContainer:x["a"],VDataTable:g["a"],VDialog:h["a"],VIcon:k["a"],VRow:_["a"],VSnackbar:w["a"],VSpacer:D["a"],VTextField:C["a"]})}}]);
//# sourceMappingURL=chunk-2d228e68.afec2ec9.js.map